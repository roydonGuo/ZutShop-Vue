"use strict";(self["webpackChunkzut_shop"]=self["webpackChunkzut_shop"]||[]).push([[700],{2700:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("el-card",{staticStyle:{"max-width":"400px",margin:"auto"}},[t("el-form",{ref:"UpdateUserForm",attrs:{"label-width":"80px",size:"small",model:e.form,rules:e.rules}},[t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("点击上传头像")]),t("el-upload",{staticClass:"avatar-uploader",staticStyle:{"text-align":"center","margin-bottom":"10px"},attrs:{action:"http://localhost:7777/file/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.form.avatar?t("img",{staticClass:"avatar",staticStyle:{"border-radius":"50%"},attrs:{src:e.form.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[t("el-radio",{attrs:{label:1}},[e._v("男")]),t("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("更 新 信 息")]),t("el-button",{attrs:{type:"warning"},on:{click:e.toChangePwd}},[e._v("去 修改 密码")])],1)],1)],1)},r=[],o=(a(7658),{name:"Person",data(){return{form:{},user:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{},rules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"请输入正确的手机号",trigger:"blur"}]}}},created(){this.getUser()},methods:{async getUser(){this.user.uid&&(this.form=(await this.request.get("/user/"+this.user.uid)).data.data,this.form?console.log(this.form):this.$message.error("请登录"))},save(){this.$refs["UpdateUserForm"].validate((e=>{e&&this.request.post("/user/update",this.form).then((e=>{console.log(this.form),200===e.code?(this.$message.success("保存成功"),localStorage.setItem("userInfo",JSON.stringify(this.form)),window.location.reload()):this.$message.error("保存失败")}))}))},toChangePwd(){this.$router.push("/password")},handleAvatarSuccess(e){console.log(e),200===e.code?(this.form.avatar=e.data.data,this.$message.success("上传成功")):this.$message.error("上传失败")}}}),l=o,i=a(1001),n=(0,i.Z)(l,s,r,!1,null,"faf3024a",null),m=n.exports}}]);
//# sourceMappingURL=700.f3b190cc.js.map